schema: schema.json
documents:
  - './src/graphql/**/*.js'
  - './src/graphql/**/*.gql'
generates:
  ./src/graphql/types/index.ts:
    plugins:
      - add:
          content: '/* eslint-disable @typescript-eslint/no-redeclare */'
      - typescript
      - typescript-operations
    config:
      enumsAsConst: true

  ./src/graphql/enums/index.ts:
    plugins:
      - add:
          content: '/* eslint-disable @typescript-eslint/no-redeclare */'
      - typescript
    config:
      enumsAsConst: true
      typesPrefix: __SHOULD_NOT_USE__
      enumPrefix: false

  ./src/graphql/hooks/index.ts:
    plugins:
      - typescript-react-apollo
    config:
      withComponent: false
      withHOC: false
      withHooks: true
      apolloClientVersion: 3
      reactApolloVersion: 3
      importOperationTypesFrom: import('../types')

  # For mock
  ./src/graphql/types/index.mock.ts:
    plugins:
      - add:
          content: '/* eslint-disable @typescript-eslint/no-redeclare */'
      - typescript
      - typescript-operations
      - typescript-msw
    config:
      enumsAsConst: true
      skipTypename: false
  ./src/graphql/types/data.mock.ts:
    plugins:
      - add:
          content: '/* eslint-disable @typescript-eslint/no-redeclare @typescript-eslint/no-use-before-define,@typescript-eslint/no-unused-vars,no-prototype-builtins */'
      - typescript-mock-data: # our mock‚Äêdata plugin
          # path to your generated types file
          typesFile: './index.mock.ts'
          prefix: 'mock'
          # (optional) include __typename fields
          addTypename:
            true
            # or skip some types
          excludedTypes:
            - Query
            - Mutation
    config:
      # Critical for verbatimModuleSyntax compatibility
      useTypeImports: true
      avoidOptionals: true
      enumsAsTypes: true

config:
  scalars:
    Time: string
    Cursor: string
  skipTypename: true
  preResolveTypes: true
  maybeValue: T | null
  avoidOptionals:
    field: true
